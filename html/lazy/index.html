<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    .image-item {
      display: block;
      height: 300px;
      padding-bottom: 20px;
    }
  </style>
</head>

<body>
  <img class="image-item"
    data-original="http://n1-q.mafengwo.net/s5/M00/2B/33/wKgB3FCD8BiTRxzcABknU79gXpM12.jpeg?imageMogr2%2Fthumbnail%2F%21690x450r%2Fgravity%2FCenter%2Fcrop%2F%21690x450%2Fquality%2F90%7Cwatermark%2F1%2Fimage%2FaHR0cDovL3AxLXEubWFmZW5nd28ubmV0L3M4L00wMC82Mi83OS93S2dCcFZodUN6Q0FJa3RIQUFBTkc4TDlCUU0xNjAucG5n%2Fgravity%2FNorthWest%2Fdx%2F20%2Fdy%2F21"
    src="" lazyLoad="true" alt="">
  <img class="image-item"
    data-original="http://n1-q.mafengwo.net/s5/M00/2B/33/wKgB3FCD8BiTRxzcABknU79gXpM12.jpeg?imageMogr2%2Fthumbnail%2F%21690x450r%2Fgravity%2FCenter%2Fcrop%2F%21690x450%2Fquality%2F90%7Cwatermark%2F1%2Fimage%2FaHR0cDovL3AxLXEubWFmZW5nd28ubmV0L3M4L00wMC82Mi83OS93S2dCcFZodUN6Q0FJa3RIQUFBTkc4TDlCUU0xNjAucG5n%2Fgravity%2FNorthWest%2Fdx%2F20%2Fdy%2F21"
    src="" lazyLoad="true" alt="">
  <img class="image-item"
    data-original="http://n1-q.mafengwo.net/s5/M00/2B/33/wKgB3FCD8BiTRxzcABknU79gXpM12.jpeg?imageMogr2%2Fthumbnail%2F%21690x450r%2Fgravity%2FCenter%2Fcrop%2F%21690x450%2Fquality%2F90%7Cwatermark%2F1%2Fimage%2FaHR0cDovL3AxLXEubWFmZW5nd28ubmV0L3M4L00wMC82Mi83OS93S2dCcFZodUN6Q0FJa3RIQUFBTkc4TDlCUU0xNjAucG5n%2Fgravity%2FNorthWest%2Fdx%2F20%2Fdy%2F21"
    src="" lazyLoad="true" alt="">
  <img class="image-item"
    data-original="http://n1-q.mafengwo.net/s5/M00/2B/33/wKgB3FCD8BiTRxzcABknU79gXpM12.jpeg?imageMogr2%2Fthumbnail%2F%21690x450r%2Fgravity%2FCenter%2Fcrop%2F%21690x450%2Fquality%2F90%7Cwatermark%2F1%2Fimage%2FaHR0cDovL3AxLXEubWFmZW5nd28ubmV0L3M4L00wMC82Mi83OS93S2dCcFZodUN6Q0FJa3RIQUFBTkc4TDlCUU0xNjAucG5n%2Fgravity%2FNorthWest%2Fdx%2F20%2Fdy%2F21"
    src="" lazyLoad="true" alt="">
  <img class="image-item"
    data-original="http://n1-q.mafengwo.net/s5/M00/2B/33/wKgB3FCD8BiTRxzcABknU79gXpM12.jpeg?imageMogr2%2Fthumbnail%2F%21690x450r%2Fgravity%2FCenter%2Fcrop%2F%21690x450%2Fquality%2F90%7Cwatermark%2F1%2Fimage%2FaHR0cDovL3AxLXEubWFmZW5nd28ubmV0L3M4L00wMC82Mi83OS93S2dCcFZodUN6Q0FJa3RIQUFBTkc4TDlCUU0xNjAucG5n%2Fgravity%2FNorthWest%2Fdx%2F20%2Fdy%2F21"
    src="" lazyLoad="true" alt="">
  <img class="image-item"
    data-original="http://n1-q.mafengwo.net/s5/M00/2B/33/wKgB3FCD8BiTRxzcABknU79gXpM12.jpeg?imageMogr2%2Fthumbnail%2F%21690x450r%2Fgravity%2FCenter%2Fcrop%2F%21690x450%2Fquality%2F90%7Cwatermark%2F1%2Fimage%2FaHR0cDovL3AxLXEubWFmZW5nd28ubmV0L3M4L00wMC82Mi83OS93S2dCcFZodUN6Q0FJa3RIQUFBTkc4TDlCUU0xNjAucG5n%2Fgravity%2FNorthWest%2Fdx%2F20%2Fdy%2F21"
    src="" lazyLoad="true" alt="">
  <img class="image-item"
    data-original="http://n1-q.mafengwo.net/s5/M00/2B/33/wKgB3FCD8BiTRxzcABknU79gXpM12.jpeg?imageMogr2%2Fthumbnail%2F%21690x450r%2Fgravity%2FCenter%2Fcrop%2F%21690x450%2Fquality%2F90%7Cwatermark%2F1%2Fimage%2FaHR0cDovL3AxLXEubWFmZW5nd28ubmV0L3M4L00wMC82Mi83OS93S2dCcFZodUN6Q0FJa3RIQUFBTkc4TDlCUU0xNjAucG5n%2Fgravity%2FNorthWest%2Fdx%2F20%2Fdy%2F21"
    src="" lazyLoad="true" alt="">
  <img class="image-item"
    data-original="http://n1-q.mafengwo.net/s5/M00/2B/33/wKgB3FCD8BiTRxzcABknU79gXpM12.jpeg?imageMogr2%2Fthumbnail%2F%21690x450r%2Fgravity%2FCenter%2Fcrop%2F%21690x450%2Fquality%2F90%7Cwatermark%2F1%2Fimage%2FaHR0cDovL3AxLXEubWFmZW5nd28ubmV0L3M4L00wMC82Mi83OS93S2dCcFZodUN6Q0FJa3RIQUFBTkc4TDlCUU0xNjAucG5n%2Fgravity%2FNorthWest%2Fdx%2F20%2Fdy%2F21"
    src="" lazyLoad="true" alt="">
  <img class="image-item"
    data-original="http://n1-q.mafengwo.net/s5/M00/2B/33/wKgB3FCD8BiTRxzcABknU79gXpM12.jpeg?imageMogr2%2Fthumbnail%2F%21690x450r%2Fgravity%2FCenter%2Fcrop%2F%21690x450%2Fquality%2F90%7Cwatermark%2F1%2Fimage%2FaHR0cDovL3AxLXEubWFmZW5nd28ubmV0L3M4L00wMC82Mi83OS93S2dCcFZodUN6Q0FJa3RIQUFBTkc4TDlCUU0xNjAucG5n%2Fgravity%2FNorthWest%2Fdx%2F20%2Fdy%2F21"
    src="" lazyLoad="true" alt="">
  <img class="image-item"
    data-original="http://n1-q.mafengwo.net/s5/M00/2B/33/wKgB3FCD8BiTRxzcABknU79gXpM12.jpeg?imageMogr2%2Fthumbnail%2F%21690x450r%2Fgravity%2FCenter%2Fcrop%2F%21690x450%2Fquality%2F90%7Cwatermark%2F1%2Fimage%2FaHR0cDovL3AxLXEubWFmZW5nd28ubmV0L3M4L00wMC82Mi83OS93S2dCcFZodUN6Q0FJa3RIQUFBTkc4TDlCUU0xNjAucG5n%2Fgravity%2FNorthWest%2Fdx%2F20%2Fdy%2F21"
    src="" lazyLoad="true" alt="">r
  <img class="image-item"
    data-original="http://n1-q.mafengwo.net/s5/M00/2B/33/wKgB3FCD8BiTRxzcABknU79gXpM12.jpeg?imageMogr2%2Fthumbnail%2F%21690x450r%2Fgravity%2FCenter%2Fcrop%2F%21690x450%2Fquality%2F90%7Cwatermark%2F1%2Fimage%2FaHR0cDovL3AxLXEubWFmZW5nd28ubmV0L3M4L00wMC82Mi83OS93S2dCcFZodUN6Q0FJa3RIQUFBTkc4TDlCUU0xNjAucG5n%2Fgravity%2FNorthWest%2Fdx%2F20%2Fdy%2F21"
    src="" lazyLoad="true" alt="">
  <img class="image-item"
    data-original="http://n1-q.mafengwo.net/s5/M00/2B/33/wKgB3FCD8BiTRxzcABknU79gXpM12.jpeg?imageMogr2%2Fthumbnail%2F%21690x450r%2Fgravity%2FCenter%2Fcrop%2F%21690x450%2Fquality%2F90%7Cwatermark%2F1%2Fimage%2FaHR0cDovL3AxLXEubWFmZW5nd28ubmV0L3M4L00wMC82Mi83OS93S2dCcFZodUN6Q0FJa3RIQUFBTkc4TDlCUU0xNjAucG5n%2Fgravity%2FNorthWest%2Fdx%2F20%2Fdy%2F21"
    src="" lazyLoad="true" alt="">

  <script>
    let viewHeight = document.documentElement.clientHeight
    function lazyLoad() {
      let eles = document.querySelectorAll('img[data-original][lazyLoad]')
      console.log(eles)
      //console.log(eles)
      //判断每一个img是否出现在来可视区域内
      // Array.from(eles).forEach(item => {
      //     console.log(item)
      //   })
      function scroll() {
        console.log("开始滚动！");
      }
      Array.prototype.forEach.call(eles, function (item, index) {
        console.log(viewHeight)
        let rect;
        rect = item.getBoundingClientRect() //用于获取页面上某个元素的左上右下分别
        console.log(rect)
        if (rect.bottom >= 0 && rect.top < viewHeight) {        //在可视区域
          !function () {
            let img = new Image()
            img.src = item.dataset.original
            // console.log(img)
            img.onload = function () {
              item.src = img.src
            }
            item.removeAttribute('data-original') //移除属性，下次不再遍历
            item.removeAttribute('lazyLoad')
          }()
        }
      })
    }
    lazyLoad()
    window.onscroll = function () {
      // 监听页面滚动
      lazyLoad()
    }

  </script>
</body>

</html>